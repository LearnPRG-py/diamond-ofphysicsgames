<div class="a" style="overflow-x:hidden" id="achievement-bar"><div class="b" id="bar-particles"></div><div class="c"><div class="d" id="achievement-popup"><div class="e" id="popup-icon">üèÜ</div><div class="f"><div class="g" id="popup-title">Achievement Get!</div><div class="h" id="popup-desc">You've earned points!</div></div></div></div><div class="i"><a href="https://games.quarklearning.online/achievements.html" class="j">üèÜ Achievements</a></div><div class="k"><div class="l"><span class="m">üî•</span><div class="n"><div class="o" id="streak-number">0</div><div class="p">streak</div></div></div><div class="q"><div class="r"><span class="s" id="rank-icon">üë§</span><span class="t" id="rank-name">New Student</span></div><div class="u" id="points-text">0 points</div></div></div></div><style>*{box-sizing:border-box}body{margin:0;padding:0;overflow-x:hidden}.a{width:100%;height:70px;background:linear-gradient(135deg,#0a0a0f 0%,#1a0a1f 50%,#0f0a1a 100%);border-bottom:1px solid rgba(138,43,226,0.3);display:flex;align-items:center;justify-content:space-between;padding:0 30px;position:relative;overflow-x:hidden;box-shadow:0 2px 20px rgba(0,0,0,0.3);font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;color:white}.b{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;pointer-events:none;opacity:0.3}.v{position:absolute;color:rgba(255,255,255,0.4);font-size:8px;animation:w 8s ease-in-out infinite}@keyframes w{0%,100%{transform:translateX(0) translateY(0);opacity:0.2}50%{transform:translateX(10px) translateY(-5px);opacity:0.6}}.c{flex:1;max-width:300px;height:50px;position:relative}.d{position:absolute;left:0;top:0;width:280px;height:50px;background:linear-gradient(135deg,#2d1810 0%,#3d2416 100%);border:2px solid #8b4513;border-radius:8px;display:flex;align-items:center;padding:8px 12px;transform:translateX(-100%);transition:all 0.5s cubic-bezier(0.68,-0.55,0.265,1.55);opacity:0;box-shadow:0 4px 15px rgba(0,0,0,0.4)}.d.show{transform:translateX(0);opacity:1}.e{width:32px;height:32px;background:#4a4a4a;border:1px solid #666;border-radius:4px;display:flex;align-items:center;justify-content:center;font-size:16px;margin-right:10px;flex-shrink:0}.f{flex:1;min-width:0}.g{font-size:12px;font-weight:600;color:#ffff55;margin-bottom:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.h{font-size:11px;color:#cccccc;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.i{flex:0 0 auto;display:flex;align-items:center;justify-content:center}.j{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border:none;padding:12px 24px;border-radius:25px;color:white;font-size:14px;font-weight:600;cursor:pointer;transition:all 0.3s ease;box-shadow:0 4px 15px rgba(102,126,234,0.3);text-decoration:none;display:inline-flex;align-items:center;gap:8px}.j:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(102,126,234,0.4);text-decoration:none;color:white}.k{flex:1;max-width:300px;display:flex;align-items:center;justify-content:flex-end;gap:25px;margin-left:-10px;overflow-x:hidden}.l{display:flex;align-items:center;gap:8px;background:rgba(255,87,34,0.15);border:1px solid rgba(255,87,34,0.4);border-radius:20px;padding:8px 15px;transition:all 0.3s ease;min-width:0;flex-shrink:1}.l:hover{background:rgba(255,87,34,0.2);transform:scale(1.05)}.m{font-size:20px}.n{display:flex;flex-direction:column;align-items:center;gap:1px}.o{font-size:16px;font-weight:700;color:#ff5722;line-height:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.p{font-size:10px;color:rgba(255,255,255,0.7);line-height:1}.q{display:flex;flex-direction:column;align-items:center;text-align:center;background:rgba(33,150,243,0.15);border:1px solid rgba(33,150,243,0.4);border-radius:15px;padding:8px 15px;min-width:100px;transition:all 0.3s ease;flex-shrink:1}.q:hover{background:rgba(33,150,243,0.2);transform:scale(1.05)}.r{display:flex;align-items:center;gap:6px;margin-bottom:2px}.s{font-size:18px}.t{font-size:13px;font-weight:600;color:rgba(255,255,255,0.95);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.u{font-size:11px;color:rgba(255,255,255,0.6);line-height:1;overflow:hidden;text-overflow:ellipsis}@media (max-width:768px){.a{padding:0 10px;height:60px}.k{gap:10px}.j{padding:8px 16px;font-size:12px}.d{max-width:220px;height:45px}.q,.l{padding:6px 8px}}@media (max-width:600px){.a{flex-wrap:wrap;height:auto;padding:8px 10px;gap:8px;min-height:60px}.c{order:2;max-width:100%;width:100%;flex-basis:100%}.i{order:1;flex-basis:100%;margin-bottom:5px}.k{order:3;justify-content:center;max-width:100%;flex-basis:100%}}</style><script>const SK={points:'ach_points',streak:'ach_streak'};let ls=null;function initLS(){if(ls===null){const es=getC('ach_local_secret');if(es){ls=parseInt(es,10)}else{ls=Math.floor(Math.random()*10000);setC('ach_local_secret',String(ls),2147483647)}}return ls}function encV(v){const s=initLS();return(s*s)+(44*s)+v}function decV(ev){const s=initLS();return ev-(s*s)-(44*s)}function setC(n,v,d=2147483647){const e=new Date(Date.now()+d*864e5).toUTCString();const c=`${encodeURIComponent(n)}=${encodeURIComponent(String(v))}; Expires=${e}; Path=/; Domain=.quarklearning.online; Secure; SameSite=None`;document.cookie=c}function getC(n){const cs=document.cookie?document.cookie.split('; '):[];for(let i=0;i<cs.length;i++){const p=cs[i].split('=');const k=decodeURIComponent(p.shift());const v=p.join('=');if(k===n)return decodeURIComponent(v)}return null}const RT=[{threshold:50,name:"Getting Started",icon:"üåü"},{threshold:200,name:"Point Collector",icon:"üíé"},{threshold:500,name:"Rising Scholar",icon:"üìö"},{threshold:1000,name:"Point Hoarder",icon:"üí∞"},{threshold:5000,name:"Master",icon:"üëë"},{threshold:10000,name:"Legendary",icon:"üèÜ"},{threshold:50000,name:"HOW DID WE GET HERE?!",icon:"üöÄ"}];const DR={name:"New Student",icon:"üë§"};let pa=[],ipa=false;function gV(k){const r=getC(SK[k]);if(!r)return 0;const rv=parseInt(r,10);if(!Number.isFinite(rv))return 0;if(rv>1000000){try{const d=decV(rv);if(d>=0&&d<1000000)return d}catch(e){console.warn(`Failed to decrypt ${k}:`,e)}}return rv}function sV(k,v){const nv=Number(v);if(!Number.isFinite(nv)){console.warn(`Attempted to set ${k} to ${v}, which is not a finite number. Ignoring write.`);return}try{const ev=encV(nv);setC(SK[k],String(ev),2147483647);uSD()}catch(e){console.error(`Failed to encrypt ${k}, saving unencrypted:`,e);setC(SK[k],String(nv),2147483647);uSD()}}function gCR(p){let cr=DR;for(const r of RT){if(p>=r.threshold)cr=r}return cr}function aNA(id,icon,title,desc){const a={id,icon,title,description:desc,timestamp:Date.now()};if(!pa.find(ach=>ach.id===id)){pa.push(a);if(document.hasFocus()&&document.getElementById('achievement-popup')&&!ipa){pAQ()}}}function pAQ(){if(ipa||pa.length===0)return;ipa=true;const a=pa.shift();sAN(a.icon,a.title,a.description);setTimeout(()=>{ipa=false;pAQ()},5000)}function cBP(){const c=document.getElementById('bar-particles');if(!c)return;c.innerHTML='';const ps=['‚ú¶','‚úß','‚≠ê','‚ú®'];for(let i=0;i<8;i++){const p=document.createElement('div');p.className='v';p.textContent=ps[Math.floor(Math.random()*ps.length)];p.style.left=Math.random()*100+'%';p.style.top=Math.random()*70+'%';p.style.animationDelay=Math.random()*8+'s';p.style.animationDuration=(6+Math.random()*4)+'s';c.appendChild(p)}}function uSD(){const p=gV('points');const s=gV('streak');const cr=gCR(p);const se=document.getElementById('streak-number');if(se)se.textContent=s;const rie=document.getElementById('rank-icon');const rne=document.getElementById('rank-name');const pe=document.getElementById('points-text');if(rie)rie.textContent=cr.icon;if(rne)rne.textContent=cr.name;if(pe)pe.textContent=`${p.toLocaleString()} points`}function sAN(icon,title,desc){const pop=document.getElementById('achievement-popup');const ie=document.getElementById('popup-icon');const te=document.getElementById('popup-title');const de=document.getElementById('popup-desc');if(!pop||!ie||!te||!de)return;ie.textContent=icon;te.textContent=title;de.textContent=desc;pop.classList.add('show');setTimeout(()=>{pop.classList.remove('show')},4000)}if(!window.achievementBarInitialized){window.achievementBarInitialized=true;document.addEventListener('DOMContentLoaded',function(){initLS();uSD();cBP();if(typeof checkAchievementsAndUpdate==='function'){setTimeout(()=>{checkAchievementsAndUpdate()},100)}setTimeout(()=>{pAQ()},500)});window.addEventListener('focus',function(){uSD();if(typeof checkAchievementsAndUpdate==='function'){setTimeout(()=>{checkAchievementsAndUpdate()},100)}setTimeout(()=>{pAQ()},200)})}window.addNewAchievement=aNA;window.getValue=gV;window.setValue=sV;window.updateStatsDisplay=uSD;</script>
